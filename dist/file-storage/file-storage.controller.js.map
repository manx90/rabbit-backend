{"version":3,"sources":["../../src/file-storage/file-storage.controller.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-unused-vars */\nimport { Controller, Get, Param, Res } from '@nestjs/common';\nimport { Response } from 'express';\nimport { join } from 'path';\nimport { FileStorageService } from './file-storage.service';\n\n@Controller('uploads')\nexport class FileStorageController {\n  constructor(private readonly fileStorageService: FileStorageService) {}\n\n  @Get(':subdir/:filename')\n  getFile(\n    @Param('subdir') subdir: string,\n    @Param('filename') filename: string,\n    @Res() res: Response,\n  ) {\n    try {\n      const filePath = join(subdir, filename);\n      const file = this.fileStorageService.getFile(filePath);\n\n      // Determine content type based on file extension\n      const ext = filename.split('.').pop();\n      const contentTypes: Record<string, string> = {\n        png: 'image/png',\n        jpg: 'image/jpeg',\n        jpeg: 'image/jpeg',\n        gif: 'image/gif',\n        webp: 'image/webp',\n        pdf: 'application/pdf',\n        // Add more types as needed\n      };\n\n      const contentType =\n        (ext && contentTypes[ext.toLowerCase()]) || 'application/octet-stream';\n      res.type(contentType).send(file);\n    } catch (_error) {\n      res.status(404).send('File not found');\n    }\n  }\n}\n"],"names":["FileStorageController","getFile","subdir","filename","res","filePath","join","file","fileStorageService","ext","split","pop","contentTypes","png","jpg","jpeg","gif","webp","pdf","contentType","toLowerCase","type","send","_error","status","constructor"],"mappings":"AAAA,oDAAoD;;;;+BAOvCA;;;eAAAA;;;wBAN+B;yBACnB;sBACJ;oCACc;;;;;;;;;;;;;;;AAG5B,IAAA,AAAMA,wBAAN,MAAMA;IAIXC,QACE,AAAiBC,MAAc,EAC/B,AAAmBC,QAAgB,EACnC,AAAOC,GAAa,EACpB;QACA,IAAI;YACF,MAAMC,WAAWC,IAAAA,UAAI,EAACJ,QAAQC;YAC9B,MAAMI,OAAO,IAAI,CAACC,kBAAkB,CAACP,OAAO,CAACI;YAE7C,iDAAiD;YACjD,MAAMI,MAAMN,SAASO,KAAK,CAAC,KAAKC,GAAG;YACnC,MAAMC,eAAuC;gBAC3CC,KAAK;gBACLC,KAAK;gBACLC,MAAM;gBACNC,KAAK;gBACLC,MAAM;gBACNC,KAAK;YAEP;YAEA,MAAMC,cACJ,AAACV,OAAOG,YAAY,CAACH,IAAIW,WAAW,GAAG,IAAK;YAC9ChB,IAAIiB,IAAI,CAACF,aAAaG,IAAI,CAACf;QAC7B,EAAE,OAAOgB,QAAQ;YACfnB,IAAIoB,MAAM,CAAC,KAAKF,IAAI,CAAC;QACvB;IACF;IA9BAG,YAAY,AAAiBjB,kBAAsC,CAAE;aAAxCA,qBAAAA;IAAyC;AA+BxE"}