{"version":3,"sources":["../../src/product/category.controller.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-unsafe-member-access */\nimport {\n  Controller,\n  Get,\n  Post,\n  Put,\n  Delete,\n  Body,\n  Param,\n  HttpException,\n  HttpStatus,\n  HttpCode,\n  UseGuards,\n} from '@nestjs/common';\nimport { CategoryService } from './category.service';\nimport { JwtAuthGuard } from '../common/guards/jwt-auth.guard';\nimport { RolesGuard } from '../common/guards/roles.guard';\nimport { Roles } from '../common/decorators/roles.decorator';\nimport { Role } from '../common/constants/roles.constant';\nimport {\n  CreateCategoryDto,\n  UpdateCategoryDto,\n  CreateSubCategoryDto,\n  UpdateSubCategoryDto,\n  CategoryResponseDto,\n  SubCategoryResponseDto,\n} from './dto/category.dto';\n\n@Controller('category')\nexport class CategoryController {\n  constructor(private readonly categoryService: CategoryService) {}\n  @Get('subcategory')\n  @UseGuards(JwtAuthGuard, RolesGuard)\n  @Roles(Role.Admin, Role.SuperAdmin)\n  async getSubCategories() {\n    return this.categoryService.getSubCategories();\n  }\n\n  @Get()\n  async getAllCategories(): Promise<CategoryResponseDto[]> {\n    return this.categoryService.getAllCategories();\n  }\n\n  @Post()\n  @UseGuards(JwtAuthGuard, RolesGuard)\n  @Roles(Role.Admin, Role.SuperAdmin)\n  @HttpCode(HttpStatus.CREATED)\n  async createCategory(\n    @Body() dto: CreateCategoryDto,\n  ): Promise<{ message: string; data: CategoryResponseDto }> {\n    try {\n      const result = await this.categoryService.createCategory(dto);\n      return { message: 'Category created successfully', data: result };\n    } catch (error: any) {\n      throw new HttpException(error.message, HttpStatus.BAD_REQUEST);\n    }\n  }\n\n  @Get(':id')\n  async getCategoryById(@Param('id') id: string): Promise<CategoryResponseDto> {\n    try {\n      return await this.categoryService.getCategoryById(Number(id));\n    } catch (error: any) {\n      throw new HttpException(error.message, HttpStatus.NOT_FOUND);\n    }\n  }\n\n  @Put(':id')\n  @UseGuards(JwtAuthGuard, RolesGuard)\n  @Roles(Role.Admin, Role.SuperAdmin)\n  async updateCategory(\n    @Param('id') id: string,\n    @Body() dto: UpdateCategoryDto,\n  ): Promise<CategoryResponseDto> {\n    try {\n      return await this.categoryService.updateCategory(Number(id), dto);\n    } catch (error: any) {\n      throw new HttpException(error.message, HttpStatus.BAD_REQUEST);\n    }\n  }\n\n  @Post('subcategory')\n  @UseGuards(JwtAuthGuard, RolesGuard)\n  @Roles(Role.Admin, Role.SuperAdmin)\n  @HttpCode(HttpStatus.CREATED)\n  async createSubCategory(\n    @Body() dto: CreateSubCategoryDto,\n  ): Promise<{ message: string; data: SubCategoryResponseDto }> {\n    try {\n      const result = await this.categoryService.createSubCategory(dto);\n      return { message: 'SubCategory created successfully', data: result };\n    } catch (error: any) {\n      throw new HttpException(error.message, HttpStatus.BAD_REQUEST);\n    }\n  }\n\n  @Put('subcategory/:id')\n  @UseGuards(JwtAuthGuard, RolesGuard)\n  @Roles(Role.Admin, Role.SuperAdmin)\n  async updateSubCategory(\n    @Param('id') id: string,\n    @Body() dto: UpdateSubCategoryDto,\n  ): Promise<SubCategoryResponseDto> {\n    try {\n      return await this.categoryService.updateSubCategory(Number(id), dto);\n    } catch (error: any) {\n      throw new HttpException(error.message, HttpStatus.BAD_REQUEST);\n    }\n  }\n\n  @Delete()\n  @UseGuards(JwtAuthGuard, RolesGuard)\n  @Roles(Role.Admin, Role.SuperAdmin)\n  async deleteAllCategories() {\n    await this.categoryService.deleteAll();\n    return { message: 'All categories deleted successfully' };\n  }\n\n  @Delete(':id')\n  @UseGuards(JwtAuthGuard, RolesGuard)\n  @Roles(Role.Admin, Role.SuperAdmin)\n  async deleteCategory(@Param('id') id: string): Promise<{ message: string }> {\n    try {\n      await this.categoryService.deleteCategory(Number(id));\n      return { message: 'Category deleted successfully' };\n    } catch (error: any) {\n      throw new HttpException(error.message, HttpStatus.BAD_REQUEST);\n    }\n  }\n\n  @Delete('subcategory/:id')\n  @UseGuards(JwtAuthGuard, RolesGuard)\n  @Roles(Role.Admin, Role.SuperAdmin)\n  async deleteSubCategory(\n    @Param('id') id: string,\n  ): Promise<{ message: string }> {\n    try {\n      await this.categoryService.deleteSubCategory(Number(id));\n      return { message: 'SubCategory deleted successfully' };\n    } catch (error: any) {\n      throw new HttpException(error.message, HttpStatus.BAD_REQUEST);\n    }\n  }\n}\n"],"names":["CategoryController","getSubCategories","categoryService","getAllCategories","createCategory","dto","result","message","data","error","HttpException","HttpStatus","BAD_REQUEST","getCategoryById","id","Number","NOT_FOUND","updateCategory","createSubCategory","updateSubCategory","deleteAllCategories","deleteAll","deleteCategory","deleteSubCategory","constructor","Admin","SuperAdmin","CREATED"],"mappings":"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"}