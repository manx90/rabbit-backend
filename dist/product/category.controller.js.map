{"version":3,"sources":["../../src/product/category.controller.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-unsafe-member-access */\r\nimport {\r\n  Controller,\r\n  Get,\r\n  Post,\r\n  Put,\r\n  Delete,\r\n  Body,\r\n  Param,\r\n  HttpException,\r\n  HttpStatus,\r\n  HttpCode,\r\n  UseGuards,\r\n} from '@nestjs/common';\r\nimport { CategoryService } from './category.service';\r\nimport { JwtAuthGuard } from '../common/guards/jwt-auth.guard';\r\nimport { RolesGuard } from '../common/guards/roles.guard';\r\nimport { Roles } from '../common/decorators/roles.decorator';\r\nimport { Role } from '../common/constants/roles.constant';\r\nimport {\r\n  CreateCategoryDto,\r\n  UpdateCategoryDto,\r\n  CreateSubCategoryDto,\r\n  UpdateSubCategoryDto,\r\n  CategoryResponseDto,\r\n  SubCategoryResponseDto,\r\n} from './dto/category.dto';\r\n\r\n@Controller('category')\r\nexport class CategoryController {\r\n  constructor(private readonly categoryService: CategoryService) {}\r\n\r\n  @Post()\r\n  @UseGuards(JwtAuthGuard, RolesGuard)\r\n  @Roles(Role.Admin, Role.SuperAdmin)\r\n  @HttpCode(HttpStatus.CREATED)\r\n  async createCategory(\r\n    @Body() dto: CreateCategoryDto,\r\n  ): Promise<{ message: string; data: CategoryResponseDto }> {\r\n    try {\r\n      const result = await this.categoryService.createCategory(dto);\r\n      return { message: 'Category created successfully', data: result };\r\n    } catch (error: any) {\r\n      throw new HttpException(error.message, HttpStatus.BAD_REQUEST);\r\n    }\r\n  }\r\n\r\n  @Post('subcategory')\r\n  @UseGuards(JwtAuthGuard, RolesGuard)\r\n  @Roles(Role.Admin, Role.SuperAdmin)\r\n  @HttpCode(HttpStatus.CREATED)\r\n  async createSubCategory(\r\n    @Body() dto: CreateSubCategoryDto,\r\n  ): Promise<{ message: string; data: SubCategoryResponseDto }> {\r\n    try {\r\n      const result = await this.categoryService.createSubCategory(dto);\r\n      return { message: 'SubCategory created successfully', data: result };\r\n    } catch (error: any) {\r\n      throw new HttpException(error.message, HttpStatus.BAD_REQUEST);\r\n    }\r\n  }\r\n\r\n  @Get()\r\n  async getAllCategories(): Promise<CategoryResponseDto[]> {\r\n    return this.categoryService.getAllCategories();\r\n  }\r\n\r\n  @Get(':id')\r\n  async getCategoryById(@Param('id') id: string): Promise<CategoryResponseDto> {\r\n    try {\r\n      return await this.categoryService.getCategoryById(Number(id));\r\n    } catch (error: any) {\r\n      throw new HttpException(error.message, HttpStatus.NOT_FOUND);\r\n    }\r\n  }\r\n\r\n  @Put(':id')\r\n  @UseGuards(JwtAuthGuard, RolesGuard)\r\n  @Roles(Role.Admin, Role.SuperAdmin)\r\n  async updateCategory(\r\n    @Param('id') id: string,\r\n    @Body() dto: UpdateCategoryDto,\r\n  ): Promise<CategoryResponseDto> {\r\n    try {\r\n      return await this.categoryService.updateCategory(Number(id), dto);\r\n    } catch (error: any) {\r\n      throw new HttpException(error.message, HttpStatus.BAD_REQUEST);\r\n    }\r\n  }\r\n\r\n  @Put('subcategory/:id')\r\n  @UseGuards(JwtAuthGuard, RolesGuard)\r\n  @Roles(Role.Admin, Role.SuperAdmin)\r\n  async updateSubCategory(\r\n    @Param('id') id: string,\r\n    @Body() dto: UpdateSubCategoryDto,\r\n  ): Promise<SubCategoryResponseDto> {\r\n    try {\r\n      return await this.categoryService.updateSubCategory(Number(id), dto);\r\n    } catch (error: any) {\r\n      throw new HttpException(error.message, HttpStatus.BAD_REQUEST);\r\n    }\r\n  }\r\n\r\n  @Delete()\r\n  @UseGuards(JwtAuthGuard, RolesGuard)\r\n  @Roles(Role.Admin, Role.SuperAdmin)\r\n  async deleteAllCategories() {\r\n    await this.categoryService.deleteAll();\r\n    return { message: 'All categories deleted successfully' };\r\n  }\r\n\r\n  @Delete(':id')\r\n  @UseGuards(JwtAuthGuard, RolesGuard)\r\n  @Roles(Role.Admin, Role.SuperAdmin)\r\n  async deleteCategory(@Param('id') id: string): Promise<{ message: string }> {\r\n    try {\r\n      await this.categoryService.deleteCategory(Number(id));\r\n      return { message: 'Category deleted successfully' };\r\n    } catch (error: any) {\r\n      throw new HttpException(error.message, HttpStatus.BAD_REQUEST);\r\n    }\r\n  }\r\n\r\n  @Delete('subcategory/:id')\r\n  @UseGuards(JwtAuthGuard, RolesGuard)\r\n  @Roles(Role.Admin, Role.SuperAdmin)\r\n  async deleteSubCategory(\r\n    @Param('id') id: string,\r\n  ): Promise<{ message: string }> {\r\n    try {\r\n      await this.categoryService.deleteSubCategory(Number(id));\r\n      return { message: 'SubCategory deleted successfully' };\r\n    } catch (error: any) {\r\n      throw new HttpException(error.message, HttpStatus.BAD_REQUEST);\r\n    }\r\n  }\r\n}\r\n"],"names":["CategoryController","createCategory","dto","result","categoryService","message","data","error","HttpException","HttpStatus","BAD_REQUEST","createSubCategory","getAllCategories","getCategoryById","id","Number","NOT_FOUND","updateCategory","updateSubCategory","deleteAllCategories","deleteAll","deleteCategory","deleteSubCategory","constructor","Admin","SuperAdmin","CREATED"],"mappings":"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"}