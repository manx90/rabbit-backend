{"version":3,"sources":["../../../src/product/entities/Category.entity.ts"],"sourcesContent":["import {\n  Entity,\n  PrimaryGeneratedColumn,\n  Column,\n  OneToMany,\n  ManyToOne,\n  CreateDateColumn,\n  UpdateDateColumn,\n  BeforeInsert,\n  BeforeUpdate,\n} from 'typeorm';\nimport { Exclude } from 'class-transformer';\nimport { product } from './product.entity';\n\n@Entity()\nexport class category {\n  @PrimaryGeneratedColumn()\n  id: number;\n\n  @Column({ type: 'varchar', length: 100, unique: true })\n  name: string; // Category title\n\n  @OneToMany(() => subCategory, (sub) => sub.category, {\n    cascade: true,\n  })\n  subCategories: subCategory[];\n\n  @Column('simple-array', { nullable: true })\n  subCategoryIds: number[];\n\n  @BeforeInsert()\n  @BeforeUpdate()\n  updateSubCategoryIds() {\n    this.subCategoryIds = this.subCategories?.map((sub) => sub.id) || [];\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-return\n  @OneToMany(() => product, (prod) => prod.category)\n  @Exclude()\n  products: product[];\n\n  @Column({ default: true })\n  isActive: boolean;\n\n  @CreateDateColumn()\n  createdAt: Date;\n\n  @UpdateDateColumn()\n  updatedAt: Date;\n}\n\n@Entity()\nexport class subCategory {\n  @PrimaryGeneratedColumn()\n  id: number;\n\n  @Column({ type: 'varchar', length: 100 })\n  name: string; // SubCategory title\n\n  @ManyToOne(() => category, (category) => category.subCategories, {\n    onDelete: 'CASCADE',\n  })\n  @Exclude()\n  category: category;\n\n  @Column({ name: 'categoryId' })\n  categoryId: number;\n\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-return\n  @OneToMany(() => product, (prod) => prod.subCategory)\n  @Exclude()\n  products: product[];\n\n  @Column({ default: true })\n  isActive: boolean;\n\n  @CreateDateColumn()\n  createdAt: Date;\n\n  @UpdateDateColumn()\n  updatedAt: Date;\n}\n"],"names":["category","subCategory","updateSubCategoryIds","subCategoryIds","subCategories","map","sub","id","type","length","unique","cascade","nullable","product","prod","default","onDelete","name"],"mappings":";;;;;;;;;;;IAeaA,QAAQ;eAARA;;IAqCAC,WAAW;eAAXA;;;yBA1CN;kCACiB;+BACA;;;;;;;;;;AAGjB,IAAA,AAAMD,WAAN,MAAMA;IAiBXE,uBAAuB;YACC;QAAtB,IAAI,CAACC,cAAc,GAAG,EAAA,sBAAA,IAAI,CAACC,aAAa,cAAlB,0CAAA,oBAAoBC,GAAG,CAAC,CAACC,MAAQA,IAAIC,EAAE,MAAK,EAAE;IACtE;AAeF;;;;;;;QA9BYC,MAAM;QAAWC,QAAQ;QAAKC,QAAQ;;;;;gCAG/BT,cAAcK,MAAQA,IAAIN,QAAQ;QACjDW,SAAS;;;;;;QAIeC,UAAU;;;;;;;;;;;;gCAUnBC,sBAAO,GAAGC,OAASA,KAAKd,QAAQ;;;;;;QAIvCe,SAAS;;;;;;;;;;;;;;;AAWd,IAAA,AAAMd,cAAN,MAAMA;AA6Bb;;;;;;;QAzBYO,MAAM;QAAWC,QAAQ;;;;;gCAGlBT,WAAWA,WAAaA,SAASI,aAAa;QAC7DY,UAAU;;;;;;;QAKFC,MAAM;;;;;gCAICJ,sBAAO,GAAGC,OAASA,KAAKb,WAAW;;;;;;QAI1Cc,SAAS"}