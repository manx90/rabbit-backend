{"version":3,"sources":["../../../src/product/entities/Category.entity.ts"],"sourcesContent":["import {\r\n  Entity,\r\n  PrimaryGeneratedColumn,\r\n  Column,\r\n  OneToMany,\r\n  ManyToOne,\r\n  CreateDateColumn,\r\n  UpdateDateColumn,\r\n  BeforeInsert,\r\n  BeforeUpdate,\r\n} from 'typeorm';\r\nimport { Exclude } from 'class-transformer';\r\nimport { product } from './product.entity';\r\n\r\n@Entity()\r\nexport class category {\r\n  @PrimaryGeneratedColumn()\r\n  id: number;\r\n\r\n  @Column({ type: 'varchar', length: 100, unique: true })\r\n  name: string; // Category title\r\n\r\n  @Column({ type: 'longtext', nullable: true })\r\n  icon: string; // SVG icon for the category\r\n\r\n  @OneToMany(() => subCategory, (sub) => sub.category, {\r\n    cascade: true,\r\n  })\r\n  subCategories: subCategory[];\r\n\r\n  @Column('simple-array', { nullable: true })\r\n  subCategoryIds: number[];\r\n\r\n  @BeforeInsert()\r\n  @BeforeUpdate()\r\n  updateSubCategoryIds() {\r\n    this.subCategoryIds = this.subCategories?.map((sub) => sub.id) || [];\r\n  }\r\n\r\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-return\r\n  @OneToMany(() => product, (prod) => prod.category)\r\n  @Exclude()\r\n  products: product[];\r\n\r\n  @Column({ default: true })\r\n  isActive: boolean;\r\n\r\n  @CreateDateColumn()\r\n  createdAt: Date;\r\n\r\n  @UpdateDateColumn()\r\n  updatedAt: Date;\r\n}\r\n\r\n@Entity()\r\nexport class subCategory {\r\n  @PrimaryGeneratedColumn()\r\n  id: number;\r\n\r\n  @Column({ type: 'varchar', length: 100 })\r\n  name: string; // SubCategory title\r\n\r\n  @Column({ type: 'longtext', nullable: true })\r\n  icon: string; // SVG icon for the subcategory\r\n\r\n  @ManyToOne(() => category, (category) => category.subCategories, {\r\n    onDelete: 'CASCADE',\r\n  })\r\n  @Exclude()\r\n  category: category;\r\n\r\n  @Column({ name: 'categoryId' })\r\n  categoryId: number;\r\n\r\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-return\r\n  @OneToMany(() => product, (prod) => prod.subCategory)\r\n  @Exclude()\r\n  products: product[];\r\n\r\n  @Column({ default: true })\r\n  isActive: boolean;\r\n\r\n  @CreateDateColumn()\r\n  createdAt: Date;\r\n\r\n  @UpdateDateColumn()\r\n  updatedAt: Date;\r\n}\r\n"],"names":["category","subCategory","updateSubCategoryIds","subCategoryIds","subCategories","map","sub","id","type","length","unique","nullable","cascade","product","prod","default","onDelete","name"],"mappings":";;;;;;;;;;;IAeaA,QAAQ;eAARA;;IAwCAC,WAAW;eAAXA;;;yBA7CN;kCACiB;+BACA;;;;;;;;;;AAGjB,IAAA,AAAMD,WAAN,MAAMA;IAoBXE,uBAAuB;YACC;QAAtB,IAAI,CAACC,cAAc,GAAG,EAAA,sBAAA,IAAI,CAACC,aAAa,cAAlB,0CAAA,oBAAoBC,GAAG,CAAC,CAACC,MAAQA,IAAIC,EAAE,MAAK,EAAE;IACtE;AAeF;;;;;;;QAjCYC,MAAM;QAAWC,QAAQ;QAAKC,QAAQ;;;;;;QAGtCF,MAAM;QAAYG,UAAU;;;;;gCAGrBV,cAAcK,MAAQA,IAAIN,QAAQ;QACjDY,SAAS;;;;;;QAIeD,UAAU;;;;;;;;;;;;gCAUnBE,sBAAO,GAAGC,OAASA,KAAKd,QAAQ;;;;;;QAIvCe,SAAS;;;;;;;;;;;;;;;AAWd,IAAA,AAAMd,cAAN,MAAMA;AAgCb;;;;;;;QA5BYO,MAAM;QAAWC,QAAQ;;;;;;QAGzBD,MAAM;QAAYG,UAAU;;;;;gCAGrBX,WAAWA,WAAaA,SAASI,aAAa;QAC7DY,UAAU;;;;;;;QAKFC,MAAM;;;;;gCAICJ,sBAAO,GAAGC,OAASA,KAAKb,WAAW;;;;;;QAI1Cc,SAAS"}