{"version":3,"sources":["../../../src/product/entities/product-collection.entity.ts"],"sourcesContent":["import {\n  PrimaryGeneratedColumn,\n  Column,\n  Entity,\n  ManyToMany,\n  JoinTable,\n  CreateDateColumn,\n  UpdateDateColumn,\n  ManyToOne,\n  JoinColumn,\n} from 'typeorm';\nimport { product } from './product.entity';\nimport { category, subCategory } from './Category.entity';\nimport { auth } from 'src/auth/entities/auth.entity';\n\nexport enum CollectionType {\n  CATEGORY_BASED = 'category_based',\n  PRODUCT_BASED = 'product_based',\n  MIXED = 'mixed',\n}\n\nexport enum CollectionStatus {\n  ACTIVE = 'active',\n  INACTIVE = 'inactive',\n  DRAFT = 'draft',\n}\n\n@Entity()\nexport class ProductCollection {\n  @PrimaryGeneratedColumn()\n  id: number;\n\n  @Column({ type: 'varchar', length: 255 })\n  name: string;\n\n  @Column({ type: 'text', nullable: true })\n  description: string;\n\n  @Column({\n    type: 'enum',\n    enum: CollectionType,\n    default: CollectionType.MIXED,\n  })\n  type: CollectionType;\n\n  @Column({\n    type: 'enum',\n    enum: CollectionStatus,\n    default: CollectionStatus.DRAFT,\n  })\n  status: CollectionStatus;\n\n  @Column({ type: 'boolean', default: false })\n  isFeatured: boolean;\n\n  @Column({ type: 'int', default: 0 })\n  sortOrder: number;\n\n  @Column({ type: 'int', default: 0 })\n  displayPriority: number;\n\n  @Column({ type: 'boolean', default: false })\n  isPriority: boolean;\n\n  // For category-based collections\n  @ManyToMany(() => category)\n  @JoinTable({\n    name: 'collection_categories',\n    joinColumn: { name: 'collectionId', referencedColumnName: 'id' },\n    inverseJoinColumn: { name: 'categoryId', referencedColumnName: 'id' },\n  })\n  categories: category[];\n\n  // For subcategory-based collections\n  @ManyToMany(() => subCategory)\n  @JoinTable({\n    name: 'collection_subcategories',\n    joinColumn: { name: 'collectionId', referencedColumnName: 'id' },\n    inverseJoinColumn: { name: 'subCategoryId', referencedColumnName: 'id' },\n  })\n  subCategories: subCategory[];\n\n  // For product-based collections\n  @ManyToMany(() => product)\n  @JoinTable({\n    name: 'collection_products',\n    joinColumn: { name: 'collectionId', referencedColumnName: 'id' },\n    inverseJoinColumn: { name: 'productId', referencedColumnName: 'id' },\n  })\n  products: product[];\n\n  // Collection settings\n  @Column({ type: 'json', nullable: true })\n  settings: {\n    maxProducts?: number;\n    showOutOfStock?: boolean;\n    sortBy?: string;\n    sortOrder?: 'ASC' | 'DESC';\n    includeSubcategories?: boolean;\n  };\n\n  // Metadata\n  @Column({ type: 'json', nullable: true })\n  metadata: {\n    tags?: string[];\n    season?: string;\n    discount?: number;\n    validFrom?: Date;\n    validTo?: Date;\n  };\n\n  @ManyToOne(() => auth, { nullable: true })\n  @JoinColumn({ name: 'createdById' })\n  createdBy: auth;\n\n  @CreateDateColumn()\n  createdAt: Date;\n\n  @UpdateDateColumn()\n  updatedAt: Date;\n}\n"],"names":["CollectionStatus","CollectionType","ProductCollection","type","length","nullable","enum","default","category","name","joinColumn","referencedColumnName","inverseJoinColumn","subCategory","product","auth"],"mappings":";;;;;;;;;;;IAqBYA,gBAAgB;eAAhBA;;IANAC,cAAc;eAAdA;;IAaCC,iBAAiB;eAAjBA;;;yBAlBN;+BACiB;gCACc;4BACjB;;;;;;;;;;AAEd,IAAA,AAAKD,wCAAAA;;;;WAAAA;;AAML,IAAA,AAAKD,0CAAAA;;;;WAAAA;;AAOL,IAAA,AAAME,oBAAN,MAAMA;AA4Fb;;;;;;;QAxFYC,MAAM;QAAWC,QAAQ;;;;;;QAGzBD,MAAM;QAAQE,UAAU;;;;;;QAIhCF,MAAM;QACNG,MAAML;QACNM,OAAO;;;;;;QAKPJ,MAAM;QACNG,MAAMN;QACNO,OAAO;;;;;;QAICJ,MAAM;QAAWI,SAAS;;;;;;QAG1BJ,MAAM;QAAOI,SAAS;;;;;;QAGtBJ,MAAM;QAAOI,SAAS;;;;;;QAGtBJ,MAAM;QAAWI,SAAS;;;;;iCAIlBC,wBAAQ;;QAExBC,MAAM;QACNC,YAAY;YAAED,MAAM;YAAgBE,sBAAsB;QAAK;QAC/DC,mBAAmB;YAAEH,MAAM;YAAcE,sBAAsB;QAAK;;;;;iCAKpDE,2BAAW;;QAE3BJ,MAAM;QACNC,YAAY;YAAED,MAAM;YAAgBE,sBAAsB;QAAK;QAC/DC,mBAAmB;YAAEH,MAAM;YAAiBE,sBAAsB;QAAK;;;;;iCAKvDG,sBAAO;;QAEvBL,MAAM;QACNC,YAAY;YAAED,MAAM;YAAgBE,sBAAsB;QAAK;QAC/DC,mBAAmB;YAAEH,MAAM;YAAaE,sBAAsB;QAAK;;;;;;QAK3DR,MAAM;QAAQE,UAAU;;;;;;QAUxBF,MAAM;QAAQE,UAAU;;;;;gCASjBU,gBAAI;QAAIV,UAAU;;;QACrBI,MAAM"}