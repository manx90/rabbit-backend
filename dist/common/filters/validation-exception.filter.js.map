{"version":3,"sources":["../../../src/common/filters/validation-exception.filter.ts"],"sourcesContent":["import {\r\n  ExceptionFilter,\r\n  Catch,\r\n  ArgumentsHost,\r\n  HttpStatus,\r\n} from '@nestjs/common';\r\nimport { Response } from 'express';\r\nimport { BadRequestException } from '@nestjs/common';\r\n\r\n@Catch(BadRequestException)\r\nexport class ValidationExceptionFilter implements ExceptionFilter {\r\n  catch(exception: BadRequestException, host: ArgumentsHost) {\r\n    const ctx = host.switchToHttp();\r\n    const response = ctx.getResponse<Response>();\r\n    const status = exception.getStatus();\r\n    const exceptionResponse = exception.getResponse();\r\n\r\n    let message = 'Validation failed';\r\n    let errors: any[] = [];\r\n\r\n    if (typeof exceptionResponse === 'object' && exceptionResponse !== null) {\r\n      if ('message' in exceptionResponse) {\r\n        if (Array.isArray(exceptionResponse.message)) {\r\n          message = 'Validation failed';\r\n          errors = exceptionResponse.message;\r\n        } else {\r\n          message = exceptionResponse.message as string;\r\n        }\r\n      }\r\n    } else {\r\n      message = exception.message;\r\n    }\r\n\r\n    response.status(status).json({\r\n      statusCode: status,\r\n      message,\r\n      errors,\r\n      timestamp: new Date().toISOString(),\r\n      path: ctx.getRequest().url,\r\n    });\r\n  }\r\n}\r\n"],"names":["ValidationExceptionFilter","catch","exception","host","ctx","switchToHttp","response","getResponse","status","getStatus","exceptionResponse","message","errors","Array","isArray","json","statusCode","timestamp","Date","toISOString","path","getRequest","url"],"mappings":";;;;+BAUaA;;;eAAAA;;;wBALN;;;;;;;AAKA,IAAA,AAAMA,4BAAN,MAAMA;IACXC,MAAMC,SAA8B,EAAEC,IAAmB,EAAE;QACzD,MAAMC,MAAMD,KAAKE,YAAY;QAC7B,MAAMC,WAAWF,IAAIG,WAAW;QAChC,MAAMC,SAASN,UAAUO,SAAS;QAClC,MAAMC,oBAAoBR,UAAUK,WAAW;QAE/C,IAAII,UAAU;QACd,IAAIC,SAAgB,EAAE;QAEtB,IAAI,OAAOF,sBAAsB,YAAYA,sBAAsB,MAAM;YACvE,IAAI,aAAaA,mBAAmB;gBAClC,IAAIG,MAAMC,OAAO,CAACJ,kBAAkBC,OAAO,GAAG;oBAC5CA,UAAU;oBACVC,SAASF,kBAAkBC,OAAO;gBACpC,OAAO;oBACLA,UAAUD,kBAAkBC,OAAO;gBACrC;YACF;QACF,OAAO;YACLA,UAAUT,UAAUS,OAAO;QAC7B;QAEAL,SAASE,MAAM,CAACA,QAAQO,IAAI,CAAC;YAC3BC,YAAYR;YACZG;YACAC;YACAK,WAAW,IAAIC,OAAOC,WAAW;YACjCC,MAAMhB,IAAIiB,UAAU,GAAGC,GAAG;QAC5B;IACF;AACF"}