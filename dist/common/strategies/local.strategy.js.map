{"version":3,"sources":["../../../src/common/strategies/local.strategy.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-unsafe-call */\r\nimport { Injectable, UnauthorizedException } from '@nestjs/common';\r\nimport { PassportStrategy } from '@nestjs/passport';\r\nimport { Strategy } from 'passport-local';\r\nimport { AuthService } from '../../auth/auth.service';\r\n\r\n@Injectable()\r\nexport class LocalStrategy extends PassportStrategy(Strategy) {\r\n  constructor(private readonly authService: AuthService) {\r\n    super({ usernameField: 'username', passwordField: 'password' });\r\n  }\r\n\r\n  async validate(username: string, password: string) {\r\n    const user = await this.authService.validateUser(username, password);\r\n    if (!user) throw new UnauthorizedException('Invalid credentials');\r\n    return user;\r\n  }\r\n}\r\n"],"names":["LocalStrategy","PassportStrategy","Strategy","validate","username","password","user","authService","validateUser","UnauthorizedException","constructor","usernameField","passwordField"],"mappings":"AAAA,oDAAoD;;;;+BAOvCA;;;eAAAA;;;wBANqC;0BACjB;+BACR;6BACG;;;;;;;;;;AAGrB,IAAA,AAAMA,gBAAN,MAAMA,sBAAsBC,IAAAA,0BAAgB,EAACC,uBAAQ;IAK1D,MAAMC,SAASC,QAAgB,EAAEC,QAAgB,EAAE;QACjD,MAAMC,OAAO,MAAM,IAAI,CAACC,WAAW,CAACC,YAAY,CAACJ,UAAUC;QAC3D,IAAI,CAACC,MAAM,MAAM,IAAIG,6BAAqB,CAAC;QAC3C,OAAOH;IACT;IARAI,YAAY,AAAiBH,WAAwB,CAAE;QACrD,KAAK,CAAC;YAAEI,eAAe;YAAYC,eAAe;QAAW,SADlCL,cAAAA;IAE7B;AAOF"}