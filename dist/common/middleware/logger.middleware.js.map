{"version":3,"sources":["../../../src/common/middleware/logger.middleware.ts"],"sourcesContent":["import { Request, Response, NextFunction } from 'express';\r\nimport { LoggerService } from '../utils/logger.service';\r\n\r\nexport function LoggerMiddleware(\r\n  req: Request,\r\n  res: Response,\r\n  next: NextFunction,\r\n) {\r\n  const logger = new LoggerService();\r\n  const { method, originalUrl, ip } = req;\r\n  const userAgent = req.get('user-agent') || '';\r\n\r\n  logger.info(`${method} ${originalUrl} - ${ip} - ${userAgent}`, 'REQUEST');\r\n\r\n  const start = Date.now();\r\n  res.on('finish', () => {\r\n    const duration = Date.now() - start;\r\n    logger.info(\r\n      `${method} ${originalUrl} - ${res.statusCode} - ${duration}ms`,\r\n      'RESPONSE',\r\n    );\r\n  });\r\n\r\n  next();\r\n}\r\n"],"names":["LoggerMiddleware","req","res","next","logger","LoggerService","method","originalUrl","ip","userAgent","get","info","start","Date","now","on","duration","statusCode"],"mappings":";;;;+BAGgBA;;;eAAAA;;;+BAFc;AAEvB,SAASA,iBACdC,GAAY,EACZC,GAAa,EACbC,IAAkB;IAElB,MAAMC,SAAS,IAAIC,4BAAa;IAChC,MAAM,EAAEC,MAAM,EAAEC,WAAW,EAAEC,EAAE,EAAE,GAAGP;IACpC,MAAMQ,YAAYR,IAAIS,GAAG,CAAC,iBAAiB;IAE3CN,OAAOO,IAAI,CAAC,GAAGL,OAAO,CAAC,EAAEC,YAAY,GAAG,EAAEC,GAAG,GAAG,EAAEC,WAAW,EAAE;IAE/D,MAAMG,QAAQC,KAAKC,GAAG;IACtBZ,IAAIa,EAAE,CAAC,UAAU;QACf,MAAMC,WAAWH,KAAKC,GAAG,KAAKF;QAC9BR,OAAOO,IAAI,CACT,GAAGL,OAAO,CAAC,EAAEC,YAAY,GAAG,EAAEL,IAAIe,UAAU,CAAC,GAAG,EAAED,SAAS,EAAE,CAAC,EAC9D;IAEJ;IAEAb;AACF"}