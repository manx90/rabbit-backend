{"version":3,"sources":["../../src/optos/optos.controller.ts"],"sourcesContent":["import {\r\n  Body,\r\n  Controller,\r\n  Get,\r\n  Post,\r\n  HttpException,\r\n  HttpStatus,\r\n  Param,\r\n  Query,\r\n} from '@nestjs/common';\r\nimport { OptosService } from './optos.token.service';\r\nimport { OptosShipmentService } from './optos.shipment.service';\r\nimport { OptosApiService } from './optos.api.services';\r\n// import { CreateShipmentDto } from './optos.dto';\r\n\r\n@Controller('optos')\r\nexport class OptosController {\r\n  constructor(\r\n    private readonly optosService: OptosService,\r\n    private readonly optosApiService: OptosApiService,\r\n    private readonly optosShipmentService: OptosShipmentService,\r\n  ) {}\r\n\r\n  @Get('token')\r\n  async getToken(): Promise<any> {\r\n    try {\r\n      return await this.optosService.Login();\r\n    } catch (error) {\r\n      this.handleError(error);\r\n    }\r\n  }\r\n  @Post('token')\r\n  async getInfo(@Body('access-token') token: string): Promise<any> {\r\n    try {\r\n      if (!token) {\r\n        throw new HttpException(\r\n          'Access token is required',\r\n          HttpStatus.BAD_REQUEST,\r\n        );\r\n      }\r\n      return await this.optosService.userInfo(token);\r\n    } catch (error) {\r\n      this.handleError(error);\r\n    }\r\n  }\r\n\r\n  @Post('Shipment')\r\n  async createShipment(@Body() createshipment: any): Promise<any> {\r\n    try {\r\n      return await this.optosShipmentService.createShipment(createshipment);\r\n    } catch (error) {\r\n      this.handleError(error);\r\n    }\r\n  }\r\n  @Get('city')\r\n  async getCities(): Promise<any> {\r\n    try {\r\n      return await this.optosApiService.Cities();\r\n    } catch (error) {\r\n      this.handleError(error);\r\n    }\r\n  }\r\n  @Get('businesses')\r\n  async getBusinesses(): Promise<any> {\r\n    try {\r\n      return await this.optosApiService.Businesses();\r\n    } catch (error) {\r\n      this.handleError(error);\r\n    }\r\n  }\r\n  @Get('BusinessesAddress')\r\n  async getBusinessesAddress(): Promise<any> {\r\n    try {\r\n      return await this.optosApiService.BusinessesAddress();\r\n    } catch (error) {\r\n      this.handleError(error);\r\n    }\r\n  }\r\n  @Get('city/:area')\r\n  async getArea(@Param('area') area: number): Promise<any> {\r\n    try {\r\n      return this.optosApiService.Area(area);\r\n    } catch (error) {\r\n      this.handleError(error);\r\n    }\r\n  }\r\n  @Get('shipment')\r\n  async getShipment(@Query() query: Record<string, any>): Promise<any> {\r\n    try {\r\n      return this.optosShipmentService.getShipment(query);\r\n    } catch (error) {\r\n      this.handleError(error);\r\n    }\r\n  }\r\n  @Get('shipmentType')\r\n  async getShipmentType(): Promise<any> {\r\n    try {\r\n      return this.optosShipmentService.getShipmentType();\r\n    } catch (error) {\r\n      this.handleError(error);\r\n    }\r\n  }\r\n  @Get('pendingTypes')\r\n  async getPendingTypes(): Promise<any> {\r\n    try {\r\n      return this.optosShipmentService.getPendingTypes();\r\n    } catch (error) {\r\n      this.handleError(error);\r\n    }\r\n  }\r\n\r\n  private handleError(error: any): never {\r\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment, @typescript-eslint/no-unsafe-member-access\r\n    const message = error.message || 'Failed to get pending types';\r\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment, @typescript-eslint/no-unsafe-member-access\r\n    const status = error.status || HttpStatus.INTERNAL_SERVER_ERROR;\r\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment, @typescript-eslint/no-unsafe-argument\r\n    throw new HttpException({ message, status }, status);\r\n  }\r\n}\r\n"],"names":["OptosController","getToken","optosService","Login","error","handleError","getInfo","token","HttpException","HttpStatus","BAD_REQUEST","userInfo","createShipment","createshipment","optosShipmentService","getCities","optosApiService","Cities","getBusinesses","Businesses","getBusinessesAddress","BusinessesAddress","getArea","area","Area","getShipment","query","getShipmentType","getPendingTypes","message","status","INTERNAL_SERVER_ERROR","constructor"],"mappings":";;;;+BAgBaA;;;eAAAA;;;wBAPN;mCACsB;sCACQ;kCACL;;;;;;;;;;;;;;;AAIzB,IAAA,AAAMA,kBAAN,MAAMA;IAOX,MACMC,WAAyB;QAC7B,IAAI;YACF,OAAO,MAAM,IAAI,CAACC,YAAY,CAACC,KAAK;QACtC,EAAE,OAAOC,OAAO;YACd,IAAI,CAACC,WAAW,CAACD;QACnB;IACF;IACA,MACME,QAAQ,AAAsBC,KAAa,EAAgB;QAC/D,IAAI;YACF,IAAI,CAACA,OAAO;gBACV,MAAM,IAAIC,qBAAa,CACrB,4BACAC,kBAAU,CAACC,WAAW;YAE1B;YACA,OAAO,MAAM,IAAI,CAACR,YAAY,CAACS,QAAQ,CAACJ;QAC1C,EAAE,OAAOH,OAAO;YACd,IAAI,CAACC,WAAW,CAACD;QACnB;IACF;IAEA,MACMQ,eAAe,AAAQC,cAAmB,EAAgB;QAC9D,IAAI;YACF,OAAO,MAAM,IAAI,CAACC,oBAAoB,CAACF,cAAc,CAACC;QACxD,EAAE,OAAOT,OAAO;YACd,IAAI,CAACC,WAAW,CAACD;QACnB;IACF;IACA,MACMW,YAA0B;QAC9B,IAAI;YACF,OAAO,MAAM,IAAI,CAACC,eAAe,CAACC,MAAM;QAC1C,EAAE,OAAOb,OAAO;YACd,IAAI,CAACC,WAAW,CAACD;QACnB;IACF;IACA,MACMc,gBAA8B;QAClC,IAAI;YACF,OAAO,MAAM,IAAI,CAACF,eAAe,CAACG,UAAU;QAC9C,EAAE,OAAOf,OAAO;YACd,IAAI,CAACC,WAAW,CAACD;QACnB;IACF;IACA,MACMgB,uBAAqC;QACzC,IAAI;YACF,OAAO,MAAM,IAAI,CAACJ,eAAe,CAACK,iBAAiB;QACrD,EAAE,OAAOjB,OAAO;YACd,IAAI,CAACC,WAAW,CAACD;QACnB;IACF;IACA,MACMkB,QAAQ,AAAeC,IAAY,EAAgB;QACvD,IAAI;YACF,OAAO,IAAI,CAACP,eAAe,CAACQ,IAAI,CAACD;QACnC,EAAE,OAAOnB,OAAO;YACd,IAAI,CAACC,WAAW,CAACD;QACnB;IACF;IACA,MACMqB,YAAY,AAASC,KAA0B,EAAgB;QACnE,IAAI;YACF,OAAO,IAAI,CAACZ,oBAAoB,CAACW,WAAW,CAACC;QAC/C,EAAE,OAAOtB,OAAO;YACd,IAAI,CAACC,WAAW,CAACD;QACnB;IACF;IACA,MACMuB,kBAAgC;QACpC,IAAI;YACF,OAAO,IAAI,CAACb,oBAAoB,CAACa,eAAe;QAClD,EAAE,OAAOvB,OAAO;YACd,IAAI,CAACC,WAAW,CAACD;QACnB;IACF;IACA,MACMwB,kBAAgC;QACpC,IAAI;YACF,OAAO,IAAI,CAACd,oBAAoB,CAACc,eAAe;QAClD,EAAE,OAAOxB,OAAO;YACd,IAAI,CAACC,WAAW,CAACD;QACnB;IACF;IAEQC,YAAYD,KAAU,EAAS;QACrC,+GAA+G;QAC/G,MAAMyB,UAAUzB,MAAMyB,OAAO,IAAI;QACjC,+GAA+G;QAC/G,MAAMC,SAAS1B,MAAM0B,MAAM,IAAIrB,kBAAU,CAACsB,qBAAqB;QAC/D,0GAA0G;QAC1G,MAAM,IAAIvB,qBAAa,CAAC;YAAEqB;YAASC;QAAO,GAAGA;IAC/C;IArGAE,YACE,AAAiB9B,YAA0B,EAC3C,AAAiBc,eAAgC,EACjD,AAAiBF,oBAA0C,CAC3D;aAHiBZ,eAAAA;aACAc,kBAAAA;aACAF,uBAAAA;IAChB;AAkGL"}