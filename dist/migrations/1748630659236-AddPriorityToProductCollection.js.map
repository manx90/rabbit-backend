{"version":3,"sources":["../../src/migrations/1748630659236-AddPriorityToProductCollection.ts"],"sourcesContent":["import { MigrationInterface, QueryRunner, TableColumn } from 'typeorm';\r\n\r\nexport class AddPriorityToProductCollection1748630659236\r\n  implements MigrationInterface\r\n{\r\n  name = 'AddPriorityToProductCollection1748630659236';\r\n\r\n  public async up(queryRunner: QueryRunner): Promise<void> {\r\n    await queryRunner.addColumns('product_collection', [\r\n      new TableColumn({\r\n        name: 'displayPriority',\r\n        type: 'int',\r\n        default: 0,\r\n        comment: 'Display priority (higher number = higher priority)',\r\n      }),\r\n      new TableColumn({\r\n        name: 'isPriority',\r\n        type: 'boolean',\r\n        default: false,\r\n        comment: 'Mark as priority collection for special display',\r\n      }),\r\n    ]);\r\n\r\n    // Add index for better performance on priority queries\r\n    await queryRunner.query(\r\n      'CREATE INDEX IDX_PRODUCT_COLLECTION_PRIORITY ON product_collection (displayPriority DESC, isPriority DESC)',\r\n    );\r\n  }\r\n\r\n  public async down(queryRunner: QueryRunner): Promise<void> {\r\n    await queryRunner.dropIndex(\r\n      'product_collection',\r\n      'IDX_PRODUCT_COLLECTION_PRIORITY',\r\n    );\r\n    await queryRunner.dropColumns('product_collection', [\r\n      'displayPriority',\r\n      'isPriority',\r\n    ]);\r\n  }\r\n}\r\n"],"names":["AddPriorityToProductCollection1748630659236","up","queryRunner","addColumns","TableColumn","name","type","default","comment","query","down","dropIndex","dropColumns"],"mappings":";;;;+BAEaA;;;eAAAA;;;yBAFgD;AAEtD,IAAA,AAAMA,8CAAN,MAAMA;IAKX,MAAaC,GAAGC,WAAwB,EAAiB;QACvD,MAAMA,YAAYC,UAAU,CAAC,sBAAsB;YACjD,IAAIC,oBAAW,CAAC;gBACdC,MAAM;gBACNC,MAAM;gBACNC,SAAS;gBACTC,SAAS;YACX;YACA,IAAIJ,oBAAW,CAAC;gBACdC,MAAM;gBACNC,MAAM;gBACNC,SAAS;gBACTC,SAAS;YACX;SACD;QAED,uDAAuD;QACvD,MAAMN,YAAYO,KAAK,CACrB;IAEJ;IAEA,MAAaC,KAAKR,WAAwB,EAAiB;QACzD,MAAMA,YAAYS,SAAS,CACzB,sBACA;QAEF,MAAMT,YAAYU,WAAW,CAAC,sBAAsB;YAClD;YACA;SACD;IACH;;aAjCAP,OAAO;;AAkCT"}